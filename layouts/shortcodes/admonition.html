{{- $type := .Get 0 -}}
{{- $title := .Get 1 -}}
{{- $content := .Inner | .Page.RenderString -}}

{{- $validTypes := (slice "note" "abstract" "info" "tip" "success" "question" "warning" "failure" "danger" "bug" "example" "quote") -}}

{{- if not (in $validTypes $type) -}}
    {{- $type = "note" -}}
{{- end -}}

<div class="admonition {{ $type }}">
    <p class="admonition-title">
        {{- if eq $type "note" -}}
            <i class="fas fa-pencil-alt fa-fw"></i>
        {{- else if eq $type "abstract" -}}
            <i class="fas fa-list-alt fa-fw"></i>
        {{- else if eq $type "info" -}}
            <i class="fas fa-info-circle fa-fw"></i>
        {{- else if eq $type "tip" -}}
            <i class="fas fa-lightbulb fa-fw"></i>
        {{- else if eq $type "success" -}}
            <i class="fas fa-check-circle fa-fw"></i>
        {{- else if eq $type "question" -}}
            <i class="fas fa-question-circle fa-fw"></i>
        {{- else if eq $type "warning" -}}
            <i class="fas fa-exclamation-triangle fa-fw"></i>
        {{- else if eq $type "failure" -}}
            <i class="fas fa-times-circle fa-fw"></i>
        {{- else if eq $type "danger" -}}
            <i class="fas fa-skull-crossbones fa-fw"></i>
        {{- else if eq $type "bug" -}}
            <i class="fas fa-bug fa-fw"></i>
        {{- else if eq $type "example" -}}
            <i class="fas fa-list fa-fw"></i>
        {{- else if eq $type "quote" -}}
            <i class="fas fa-quote-right fa-fw"></i>
        {{- end -}}
        {{ $title }}
    </p>
    <div class="admonition-content">
        {{ $content }}
    </div>
</div>

<style>
/* Styles de base pour tous les admonitions */
.admonition {
    margin: 1.5rem 0;
    padding: 0;
    border-radius: 0.25rem;
    overflow: hidden;
    box-shadow: 0 0.2rem 0.5rem rgba(0, 0, 0, 0.05);
    page-break-inside: avoid;
}

.admonition p {
    padding: 0 1rem;
    margin: 0.5rem 0;
}

.admonition-title {
    margin: 0 !important;
    padding: 0.5rem 1rem !important;
    font-weight: bold;
    font-size: 1rem;
    display: flex;
    align-items: center;
}

.admonition-title i {
    margin-right: 0.5rem;
}

.admonition-content {
    padding: 0.5rem 1rem;
}

/* Styles pour chaque type d'admonition */
.admonition.note {
    border-left: 0.25rem solid #448aff;
}
.admonition.note .admonition-title {
    background-color: rgba(68, 138, 255, 0.1);
    color: #448aff;
}

.admonition.abstract {
    border-left: 0.25rem solid #00b0ff;
}
.admonition.abstract .admonition-title {
    background-color: rgba(0, 176, 255, 0.1);
    color: #00b0ff;
}

.admonition.info {
    border-left: 0.25rem solid #00b8d4;
}
.admonition.info .admonition-title {
    background-color: rgba(0, 184, 212, 0.1);
    color: #00b8d4;
}

.admonition.tip {
    border-left: 0.25rem solid #00bfa5;
}
.admonition.tip .admonition-title {
    background-color: rgba(0, 191, 165, 0.1);
    color: #00bfa5;
}

.admonition.success {
    border-left: 0.25rem solid #00c853;
}
.admonition.success .admonition-title {
    background-color: rgba(0, 200, 83, 0.1);
    color: #00c853;
}

.admonition.question {
    border-left: 0.25rem solid #64dd17;
}
.admonition.question .admonition-title {
    background-color: rgba(100, 221, 23, 0.1);
    color: #64dd17;
}

.admonition.warning {
    border-left: 0.25rem solid #ff9100;
}
.admonition.warning .admonition-title {
    background-color: rgba(255, 145, 0, 0.1);
    color: #ff9100;
}

.admonition.failure {
    border-left: 0.25rem solid #ff5252;
}
.admonition.failure .admonition-title {
    background-color: rgba(255, 82, 82, 0.1);
    color: #ff5252;
}

.admonition.danger {
    border-left: 0.25rem solid #ff1744;
}
.admonition.danger .admonition-title {
    background-color: rgba(255, 23, 68, 0.1);
    color: #ff1744;
}

.admonition.bug {
    border-left: 0.25rem solid #f50057;
}
.admonition.bug .admonition-title {
    background-color: rgba(245, 0, 87, 0.1);
    color: #f50057;
}

.admonition.example {
    border-left: 0.25rem solid #651fff;
}
.admonition.example .admonition-title {
    background-color: rgba(101, 31, 255, 0.1);
    color: #651fff;
}

.admonition.quote {
    border-left: 0.25rem solid #9e9e9e;
}
.admonition.quote .admonition-title {
    background-color: rgba(158, 158, 158, 0.1);
    color: #9e9e9e;
}

/* Mode sombre */
@media (prefers-color-scheme: dark) {
    .admonition {
        box-shadow: 0 0.2rem 0.5rem rgba(0, 0, 0, 0.25);
    }
}
</style>
