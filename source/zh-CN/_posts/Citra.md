---
title: "Azahar 安装与配置"
date: 2025-06-02
draft: false
categories: ["Citra"]
tags: ["Citra"]
author: "Axekin"
description: "详细教程，介绍如何安装、配置和使用任天堂 3DS 模拟器 Azahar"
series: ["模拟指南"]
toc: true
math: false
featured: false
weight: 20
aliases: 
  - /zh-CN/citra-cheats-mods/
  - /zh-CN/guides/citra-modding/
summary: "学习如何在 Citra 模拟器上安装作弊码和游戏模组。包含文件夹结构和安装步骤的详细教程。"
cover: "covers/azahar.webp"
image: "covers/azahar.webp"
showtoc: true
tocopen: true
comments: true
searchHidden: false
---

## 🎮 Citra 简介

**Citra** 是最先进的开源任天堂 3DS 模拟器。自 2013 年开发以来，它允许您在 PC 上玩 3DS 游戏，并具有显著的图形改进和近乎完美的兼容性。Azahar 是它的一个分支。

## 🔧 第 1 步：下载 Citra

### 选项 1：官方 Azahar
```bash
# 官方网站
https://github.com/azahar-emu/azahar/releases
```

1. **点击** “Download for Windows”
2. **下载** `azahar-XXXX-rc1-windows-msvc-installer.exe`
3. **解压** 到一个专用文件夹（例如 `Documents\Azahar` 或另一个驱动器的根目录，而不是 C 盘）

## 游戏下载

### 第 1 步：访问游戏库

前往 **[🎮 Axekin Games - Nintendo 3DS](https://www.axekin.com/games?platform=3ds)** 访问任天堂 3DS 游戏合集。

### 第 2 步：下载游戏

1. 在列表中 **搜索** 所需游戏
2. **点击** 下载按钮
3. **等待** 下载完成

### 第 3 步：文件提取

下载完成后，使用以下软件之一 **提取** 压缩包：

| 软件 | 下载链接 | 兼容性 |
|----------|---------------|---------------|
| **7-Zip** | [下载 7-Zip](https://www.7-zip.org/) | Windows/Linux |
| **WinRAR** | [下载 WinRAR](https://www.win-rar.com/) | Windows |

> **💡 提示**：7-Zip 是免费开源的，而 WinRAR 在试用期后需要许可证。

**结果**：您将获得准备好与 3DS 一起使用的游戏文件！ 🎯

## 📁 第 2 步：文件夹结构

创建此文件夹结构以组织您的文件：

为了优化您的库的组织，推荐使用以下树状结构：

````
3DS 游戏/
├── 动物森友会 - 快乐之家设计师/
│   ├── BASE/                # 🎮 基础游戏 (主文件)
│   ├── UPDATE/              # 🔄 游戏更新 (推荐)
│   └── DLC/                 # 📦 可下载内容 (可选)
├── 生死格斗 - 多重维度/
│   ├── BASE/                # 🎮 基础游戏
│   ├── UPDATE/              # 🔄 游戏更新
│   └── DLC/                 # 📦 附加 DLC
├── 벤 10 - 银河赛车/
│   ├── BASE/
│   ├── UPDATE/
│   └── DLC/
└── 美国队长 - 超级士兵/
    ├── BASE/
    └── UPDATE/              # (此游戏无 DLC)
````


### 内容类型


- **BASE** 📁：您下载的主要游戏文件
- **UPDATE** 📁：更新和补丁 (推荐)
- **DLC** 📁：额外的付费内容 (可选但推荐)


✅ **自动检测**：游戏会自动添加到模拟器中  
✅ **简化管理**：无需手动添加每个 ROM  
✅ **清晰的组织**：轻松查看每个游戏拥有的内容  
✅ **易于维护**：添加/删除内容非常简单

> **📝 重要提示**：如果游戏没有更新或 DLC，则无需创建这些文件夹。仅为您拥有的内容创建文件夹。

### 结果

一旦此结构就位，您的模拟器将自动检测“3DS 游戏”文件夹中的所有游戏，并整齐地显示在您的库中！ 🎯

## 💡 便携式配置 (推荐)


**首次启动前**，在 Azahar 安装根目录中创建一个名为 `user` 的文件夹。这将使安装完全便携。

### 便携模式的优势

| 方面 | 普通模式 | 便携模式 |
|--------|-------------|---------------|
| **配置** | 存储在系统中 | 存储在文件夹内 |
| **存档** | 分散在计算机各处 | 集中在一个文件夹中 |
| **便携性** | ❌ 绑定到系统 | ✅ 易于移动 |
| **备份** | 难以定位 | 备份简单 |

### 创建便携文件夹后的结构

```
📁 Azahar/
├── 🎮 Azahar.exe
├── 📁 user/              # ← 创建此文件夹！
│   ├── 📁 bis/
│   ├── 📁 games/
│   ├── 📁 profiles/
│   └── 📁 system/
└── 📄 其他文件...
```


**您的所有数据** (配置、存档、个人资料) 都将存储在 `user` 文件夹中，使管理和备份更加容易！

### 创建步骤

1. 导航到 Azahar 安装文件夹
2. 创建一个名为 `user` 的新文件夹
3. 启动 Azahar — 它将自动检测便携模式

> **📝 注意**：必须在 **首次启动前** 完成此操作才能生效！

## ⚙️ 第 3 步：安装和首次运行

### Windows 先决条件

### 首次运行
1. 运行 `azahar.exe`
2. 设置您的游戏文件夹 (双击菜单，添加“3DS 游戏”文件夹)

## ⚙️ 第 4 步：优化配置

### 常规设置
```
模拟 → 配置 → 常规
```
- **模拟运行时确认退出**：✅ 启用
- **后台时暂停模拟**：✅ 启用 (可选)
- **启用 Discord Presence**：✅ 启用 (可选)

### 系统配置
```
模拟 → 配置 → 系统
```
- **地区**：欧洲 (或您的地区)
- **语言**：您的语言
- **控制台 ID**：随机 (自动生成)
- **启用 New 3DS**：✅ 启用 (以获得更好的性能)

### 推荐的图形设置

#### 图形选项卡
```
图形 → 常规
- 内部渲染分辨率：2x 原生 (400x480) 或更高。更高的值会增加 GPU 使用率。
- 启用线性过滤：✅ 启用
→ 常规
```

#### 布局选项卡

```
图形 → 布局
```


此部分允许您根据视觉偏好和硬件自定义 3DS 双屏的显示。

### 屏幕布局

**预设选项：**

| 模式 | 描述 | 推荐 |
|------|-------------|----------------|
| **默认** | 标准任天堂布局 | ✅ **初学者** |
| **单屏** | 仅显示活动屏幕 | 专注于游戏玩法 |
| **宽屏** | 横向拉伸 | 宽屏显示器 |
| **并排** | 水平屏幕 | **推荐用于游戏** |
| **分离窗口** | 两个独立窗口 | 多显示器设置 |
| **堆叠** | 垂直堆叠屏幕 | 节省空间 |
| **自定义布局** | 手动配置 | ⭐ **最灵活** |

### 自定义布局配置


**上屏幕：**
- **位置 X/Y**：`0px, 0px` (左上角)
- **宽度/高度**：`800px, 480px` (理想的 4:3 比例)

**下屏幕：**
- **位置 X/Y**：`80px, 500px` (略微居中)
- **宽度/高度**：`640px, 480px` (成比例)

**下屏幕不透明度**：`100%` (完全可见)

### 显示设置

#### 常规选项
```
屏幕 → 设置
```

**推荐调整：**
- **交换屏幕**：❌ 禁用 (保留 DS 逻辑)
- **向上旋转屏幕**：❌ 禁用
- **屏幕间隙**：`0.00` 到 `4.00`，根据偏好
- **主屏幕缩放**：`4.00` (更大的主屏幕)
- **副屏幕位置**：`右下角` (触摸区域)

#### 单屏模式


**使用场景：**
- 只使用一个主屏幕的游戏
- 节省渲染资源
- 专注于主要操作

**配置：**
- **拉伸**：☑️ 两个屏幕都勾选
- **左/右边距**：`0px` (全屏)
- **上/下边距**：`0px` (最大化使用)

> **💡 实用提示**：根据游戏测试不同的布局。RPG 通常受益于自定义布局，而动作游戏则更喜欢并排模式。

#### 高级选项卡
```
图形 → 高级
- 图形 API：OpenGL (推荐) 或 Vulkan
- 启用硬件渲染器：✅ 启用
- 启用硬件着色器：✅ 启用
- 启用精确乘法：✅ 启用
- 使用磁盘着色器缓存：✅ 启用
- 启用 VSync：✅ 启用
```

### 音频配置
```
音频
- 模拟：HLE
```

### 控制配置

#### 自动检测方法
```
控制 → 配置
1. 点击“自动配置”
2. 按下手柄上的按钮
3. 测试所有输入
```

## ⚙️ 步骤 🌐 多人游戏 (快速设置)

您可以通过编辑本地配置将 Citra/Azahar 连接到外部多人游戏服务。警告：在编辑配置文件之前完全关闭 Citra/Azahar，否则您的更改将被覆盖。

1. 打开配置文件夹：

   - 对于标准 Windows 安装：`C:\\Users\\<您的用户名>\\AppData\\Roaming\\citra\\config\\`
   - 对于便携式安装：打开 Azahar/Citra 根目录下的 `user` 文件夹

2. 编辑 `qt-config.ini` 文件 (使用记事本或文本编辑器) 并更改/添加这两行：

```
web_api_url\\default=false
web_api_url=http://88.198.47.46:5000/
```

3. 保存并关闭编辑器，然后重新启动 Citra/Azahar。

托管专用房间 (Windows `host.bat` 示例)

如果您想通过专用批处理文件托管，请创建或编辑一个 `host.bat` 文件并粘贴以下示例。您可以更改房间名称和标题 ID。

```
citra-room ^
  --room-name "你的房间名" ^
  --room-description "所有游戏" ^
  --preferred-game "任天堂明星大乱斗" ^
  --preferred-game-id "00040000000EDF00" ^
  --port 24872 ^
  --max_members 16 ^
  --token "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" ^
  --enable-citra-mods ^
  --web-api-url http://88.198.47.46:5000 ^
  --ban-list-file "在此处插入封禁列表文件路径"
pause
```

注意：

- 必要时将 `--token` 替换为您的真实令牌。
- `--preferred-game-id` 对应于游戏的标题 ID (16 位十六进制数字)。留空以接受所有游戏。
- `--web-api-url` 必须指向 API 服务器 (此处为 `http://88.198.47.46:5000`)。

通过这些步骤，Citra/Azahar 将使用指定的多人游戏服务，`host.bat` 将允许您从您的机器上托管一个房间。

### 支持的格式
- **.CCI**：由于反盗版限制，我的 ROM 与 Azahar 唯一支持的格式


## ❓ 常见问题解答

### 一般问题

**问：Azahar 能运行所有 3DS 游戏吗？**  
**答：** 大约 90% 的 3DS 游戏运行良好到完美。请查看特定游戏的兼容性数据库。

**问：立体 3D 功能是否有效？**  
**答：** 是的，使用支持 3D 的显示器或使用并排模式进行 VR。

**问：我可以使用我的真实 3DS 存档吗？**  
**答：** 是的 — 使用 Checkpoint 或 JKSM，您可以双向传输存档。

### 技术问题

**问：为什么有些游戏很慢？**  
**答：** 3DS 游戏是为特定硬件优化的。模拟对硬件要求更高，特别是对于复杂的标题。

**问：OpenGL 还是 Vulkan？**  
**答：** OpenGL 更稳定、兼容性更好。Vulkan 可以在现代 GPU 上提供更好的性能。

**问：启用 New 3DS 模式会改善一切吗？**  
**答：** 主要适用于原生使用 New 3DS 功能的游戏 (异度之刃、怪物猎人等) 和某些自制软件。

### 常见问题

**问：“无法确定系统区域”？**  
**答：** 安装系统文件 (aes_keys.txt) 并在设置中配置区域。

**问：高清纹理不显示？**  
**答：** 验证“自定义纹理”已启用，并且标题 ID 与文件夹匹配。

**问：如何在 Android 上提高性能？**  
**答：** 使用 Citra MMJ，降低分辨率，必要时启用跳帧。

享受高清 3DS 游戏吧！ 🎮✨
